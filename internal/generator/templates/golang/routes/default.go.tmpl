package {{.EntityName}}_routes

import (
	{{.EntityName}}_controllers "github.com/bakeable/bkry/api/{{.EntityName}}/controllers"
	"github.com/bakeable/bkry/api/middleware"

	"github.com/gin-gonic/gin"
)

//// THIS FILE IS AUTOGENERATED. DO NOT EDIT

func getControllers() {{.EntityName}}_controllers.IControllers {
	return {{.EntityName}}_controllers.NewControllers()
}

func InitRoutes(r *gin.RouterGroup) {
	// Get controllers
	controllers := getControllers()

	// Create a new route group for the {{.TypeName}} entity
	group := r.Group("{{.Endpoint}}")

	// Add authentication middleware for all endpoints
	group.Use(middleware.AuthenticatedRoutes())
	
	// Create endpoints
	{{- if notIn "add" .ExcludedEndpoints}}
	group.POST("", func(c *gin.Context) {
		controllers.Add(c)
	})
	{{- end}}

	{{- if notIn "delete" .ExcludedEndpoints}}
	group.DELETE(":{{.VarName}}", func(c *gin.Context) {
		controllers.Delete(c)
	})
	{{- end}}

	{{- if notIn "get_all" .ExcludedEndpoints}}
	group.GET("", func(c *gin.Context) {
		controllers.GetAllPaginated(c)
	})
	{{- end}}

	{{- if notIn "get" .ExcludedEndpoints}}
	group.GET(":{{.VarName}}", func(c *gin.Context) {
		controllers.Get(c)
	})
	{{- end}}

	{{- if notIn "query" .ExcludedEndpoints}}
	group.POST("/query", func(c *gin.Context) {
		controllers.Query(c)
	})
	{{- end}}

	{{- if notIn "update" .ExcludedEndpoints}}
	group.PUT(":{{.VarName}}", func(c *gin.Context) {
		controllers.Update(c)
	})
	{{- end}}


	// Initialize custom routes
	InitCustomRoutes(r)
}
